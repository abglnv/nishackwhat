/* ── Reset & Variables ──────────────────────────── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:       #0f1117;
  --surface:  #181a20;
  --surface2: #1e2028;
  --border:   #2a2d38;
  --text:     #e0e0e8;
  --muted:    #6b7280;
  --accent:   #6366f1;
  --green:    #22c55e;
  --yellow:   #eab308;
  --red:      #ef4444;
  --orange:   #f97316;
  --radius:   8px;
}
html,body{height:100%;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
  background:var(--bg);color:var(--text);font-size:14px}

/* ── Top bar ───────────────────────────────────── */
#topbar{display:flex;align-items:center;justify-content:space-between;
  padding:0 20px;height:52px;background:var(--surface);border-bottom:1px solid var(--border)}
.brand{font-size:16px;font-weight:700}
.brand span{color:var(--accent)}
.status-pills{display:flex;gap:8px}
.pill{padding:3px 10px;border-radius:20px;font-size:12px;font-weight:600}
.pill.green{background:#22c55e22;color:var(--green)}
.pill.red{background:#ef444422;color:var(--red)}
.pill.gray{background:#6b728022;color:var(--muted)}
.pill.yellow{background:#eab30822;color:var(--yellow)}

/* ── Layout ────────────────────────────────────── */
#layout{display:grid;grid-template-columns:240px 1fr 300px;height:calc(100vh - 52px);overflow:hidden}

/* ── Sidebar ───────────────────────────────────── */
#sidebar{background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden}
.sidebar-head{padding:14px 16px 8px;display:flex;justify-content:space-between;align-items:center}
.sidebar-head h3{font-size:13px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted)}
#filterSelect{background:var(--surface2);color:var(--text);border:1px solid var(--border);
  border-radius:4px;padding:2px 6px;font-size:12px}
#studentList{list-style:none;overflow-y:auto;flex:1;padding:4px 8px}
#studentList li{padding:10px 12px;border-radius:var(--radius);cursor:pointer;display:flex;
  align-items:center;gap:10px;margin-bottom:2px;transition:background .15s}
#studentList li:hover{background:var(--surface2)}
#studentList li.selected{background:var(--accent)22;border-left:3px solid var(--accent)}
.dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.dot.on{background:var(--green);box-shadow:0 0 6px var(--green)}
.dot.off{background:var(--red)}
.stu-info{display:flex;flex-direction:column;gap:1px;overflow:hidden}
.stu-name{font-weight:600;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.stu-sub{font-size:11px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* ── Main ──────────────────────────────────────── */
#main{overflow-y:auto;padding:20px}
#noSelection{display:flex;align-items:center;justify-content:center;height:100%;color:var(--muted);font-size:18px}
.hidden{display:none!important}

#detailHeader{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin-bottom:16px}
#detailHeader h2{font-size:20px}
.meta{font-size:12px;color:var(--muted);background:var(--surface2);padding:2px 8px;border-radius:4px}

.resource-bars{display:flex;gap:24px;margin-bottom:20px}
.bar-group{flex:1;display:flex;align-items:center;gap:10px}
.bar-group label{font-size:12px;color:var(--muted);width:32px}
.bar{flex:1;height:10px;background:var(--surface2);border-radius:5px;overflow:hidden}
.bar-fill{height:100%;border-radius:5px;transition:width .4s;background:var(--accent)}
.bar-group span{font-size:12px;width:40px;text-align:right}

/* ── Cards ─────────────────────────────────────── */
.card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);
  padding:16px;margin-bottom:16px}
.card h4{font-size:13px;text-transform:uppercase;letter-spacing:.6px;color:var(--muted);margin-bottom:12px}
.badge{background:var(--red);color:#fff;font-size:11px;padding:1px 7px;border-radius:10px;margin-left:6px}

.two-col{display:grid;grid-template-columns:1fr 1fr;gap:16px}

/* ── Tables ────────────────────────────────────── */
table{width:100%;border-collapse:collapse;font-size:13px}
th{text-align:left;color:var(--muted);font-weight:500;padding:4px 8px;border-bottom:1px solid var(--border)}
td{padding:6px 8px;border-bottom:1px solid var(--border);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}

/* ── Event list (violations / notifications) ───── */
.event-list{list-style:none;max-height:200px;overflow-y:auto}
.event-list li{padding:8px 10px;border-bottom:1px solid var(--border);font-size:13px;display:flex;gap:8px}
.event-list .ev-time{color:var(--muted);font-size:11px;flex-shrink:0;width:60px}
.ev-high{border-left:3px solid var(--red)}
.ev-medium{border-left:3px solid var(--orange)}
.ev-low{border-left:3px solid var(--yellow)}
.ev-info{border-left:3px solid var(--accent)}
.ev-warning{border-left:3px solid var(--orange)}
.ev-error{border-left:3px solid var(--red)}

/* ── Screenshot ────────────────────────────────── */
#screenshotContainer{text-align:center}
#screenshotContainer img{max-width:100%;border-radius:var(--radius);border:1px solid var(--border)}
.muted{color:var(--muted)}

/* ── Chat panel ────────────────────────────────── */
#chatPanel{background:var(--surface);border-left:1px solid var(--border);display:flex;flex-direction:column}
#chatPanel h3{padding:14px 16px 8px;font-size:13px;text-transform:uppercase;letter-spacing:.8px;color:var(--muted)}
#chatTarget{padding:0 12px 8px}
#chatTo{width:100%;background:var(--surface2);color:var(--text);border:1px solid var(--border);
  border-radius:4px;padding:6px 8px;font-size:13px}
#chatMessages{flex:1;overflow-y:auto;padding:8px 12px;display:flex;flex-direction:column;gap:6px}
.chat-msg{padding:8px 10px;border-radius:var(--radius);font-size:13px;max-width:90%;word-wrap:break-word}
.chat-msg.self{align-self:flex-end;background:var(--accent);color:#fff}
.chat-msg.other{align-self:flex-start;background:var(--surface2)}
.chat-msg.system{align-self:center;color:var(--muted);font-size:11px;font-style:italic}
.chat-msg .msg-from{font-weight:600;font-size:11px;color:var(--muted);margin-bottom:2px}
.chat-msg.self .msg-from{color:rgba(255,255,255,.7)}

#chatForm{display:flex;padding:10px 12px;gap:8px;border-top:1px solid var(--border)}
#chatInput{flex:1;background:var(--surface2);color:var(--text);border:1px solid var(--border);
  border-radius:var(--radius);padding:8px 12px;font-size:13px;outline:none}
#chatInput:focus{border-color:var(--accent)}
#chatForm button{background:var(--accent);color:#fff;border:none;border-radius:var(--radius);
  padding:8px 16px;cursor:pointer;font-weight:600;font-size:13px}
#chatForm button:hover{opacity:.9}

/* ── Responsive ────────────────────────────────── */
@media(max-width:960px){
  #layout{grid-template-columns:200px 1fr 0}
  #chatPanel{display:none}
}
@media(max-width:640px){
  #layout{grid-template-columns:1fr}
  #sidebar{max-height:200px}
}

/* ── Scrollbar ─────────────────────────────────── */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:var(--muted)}
